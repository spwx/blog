{% extends "base.html" %}

{% block title %}
  {% if query != "" %}
    Search: {{ query }} - /dev/blog
  {% else %}
    Search - /dev/blog
  {% endif %}
{% endblock %}

{% block content %}
<h2>Search Posts</h2>

<form action="/search" method="get" class="search-form">
    <input
        type="search"
        name="q"
        value="{{ query }}"
        placeholder="Search posts..."
        class="search-input"
    >
    <button type="submit" class="search-button">Search</button>
</form>

{% if query != "" %}
  <div class="search-results-info">
    <p>Search results for "<strong>{{ query }}</strong>":</p>
  </div>

  <ul class="post-list search-results">
    {% for result in results %}
    <li>
      <a href="/post/{{ result.post.slug }}" class="search-result-title">{{ result.post.title }}</a>
      <span class="date">
        Published: {{ result.post.date }}{% if result.post.updated != "" %} • Updated: {{ result.post.updated }}{% endif %}
      </span>
      <p class="search-excerpt">{{ result.excerpt }}</p>
    </li>
    {% else %}
    <li style="border: none;">
      <p>No posts found.</p>
    </li>
    {% endfor %}
  </ul>
{% endif %}

<a href="/" class="back-link">← Back to all posts</a>
{% endblock %}
